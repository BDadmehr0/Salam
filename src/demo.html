<script src="salam.min.js"></script>
<script>
const run = (res) => {
    if (res === 0) {
        const out = (window.generator.getGeneratedSource() + "\n" + window.generator.getGeneratedSourceC()).trim();
        console.log(out);
    } else {
        const errors = [
            ...(Array.isArray(window.generator?.errors) ? window.generator.errors : []),
            ...(Array.isArray(window.parser?.ast?.errors) ? window.parser.ast.errors : []),
            ...(Array.isArray(window.validator?.errors) ? window.validator.errors : [])
        ];

        if (errors.length > 0) {
            console.error("Compilation errors:", errors);
        }
    }
};

const code1 = `
layout:
    box:
        background color = "red"
        content = "Hello, World"
        font size = "50px"

        hover:
            background color = "yellow"
        end
    end
end
`;
const code2 = `
لایه:
    قسمت:
        محتوا = "سلام"
    تمام
تمام
`;

const res1 = window.mainSalam(["generator", "code", code1, "--lang", "en"]);
run(res1);
const res2 = window.mainSalam(["generator", "code", code2, "--lang", "fa"]);
run(res2);
const res3 = window.mainSalam(["generator", "code", code1, "--lang", "en"]);
run(res3);
</script>
